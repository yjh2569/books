# 성능 향상을 위한 알고리즘 기법

## 표 찾기

* 직접 계산하기보다 계산 결과를 표에 기록해두고 이후 필요할 때마다 표에서 찾는 것이 더 효율적인 경우가 있다.
* 온도 센서의 경우 A/D 변환기를 사용해 읽을 수 있는 전압을 온도에 따라 다르게 내는 회로가 있었는데, 이를 직접 계산하는데는 시간이 오래 걸렸기에 전압과 온도의 관계를 나타내는 표를 이용했다.

### 텍스처 매핑

* 3차원 물체의 표면을 표현할 때 직접 표면의 질감을 계산해 생성하기보다 이미지를 벽을 표현하는 물체의 표면에 그리는 방식
* 다만 거리에 따라 원근법을 적용한 결과를 나타낼 수 있어야 했다. 이는 뷰포인트에 따라 인접한 픽셀을 서로 합쳐서 평균을 내야하는데, 이 계산은 빠르게 수행되어야 한다.
* MIP 매핑 : 색을 표현할 때 32비트 시스템에서 낭비되는 1/4 공간에 1/4 크기 복사본을 넣어서 축소된 이미지를 따로 저장해두는 방식

### 문자 종류 판별

* 간단한 if 문을 사용해 문자가 어떤 분류에 속하는지 알 수 있지만, 표를 작성함으로써 더 빠르게 문자 종류를 판별할 수 있다.
* 이 경우 표와 비트 AND 연산을 할 때 사용하는 상숫값만 있으면 문자 종류를 판별할 수 있다.

## 정수를 사용한 계산 방법

* 곰셈이나 나눗셈, 부동소수점 연산, 삼각함수나 로그함수 계산은 비용이 비싸기에 최대한 이러한 연산을 피하는 것이 바람직하다.

### 직선

* 직선을 그릴 때 보통 직선의 기울기를 이용해 격자점을 곱셈을 통해 유추해 찍어나가는 방식을 사용한다.
* 하지만 기울기는 보통 부동소수점 연산을 유도하기에 적절하지 않다.
* 따라서 결정 변수를 사용해 정수 연산만으로 격자점을 찍는 방법을 고안했다.
  * 기울기는 보통 dy/dx로 표현하는데, dx는 전체 영역의 너비, dy는 직선에서 x가 전체 영역의 너비일 때 y값(정수값)으로 한다.
  * 결정 변수는 d = 2 * dy - dx 로 한다. 이렇게 설정한 것은 보통 결정 변수의 값이 양수인지 음수인지를 판별하는데, 맨 처음에는 기울기가 1/2보다 큰지 작은지를 구분하기 위함이다.
  * dx와 dy를 2배하고, y는 0으로 초기화한다.
  * x값을 0부터 너비까지 순회하면서 (x, y) 점을 좌표평명에 표시하고, d가 양수인 경우에만 y를 1 증가시킨 뒤 d에서 dx를 빼고, dy를 더한다.
  * 이렇게 하면 d의 값에 따라 현재 (x, y)가 실제 직선보다 위에 있는지, 아래에 있는지 판별하는 것이 가능하다.
* y 값을 색을 표현하는 값으로 대신하면 그레이디언트(gradient)를 그릴 수 있다.

### 곡선

* 타원의 경우 타원의 식을 적당히 변형했을 때 Ax^2 + By^2 - AB = 0으로 바꿀 수 있는데, 이를 격자점으로 표현할 경우 동쪽 점, 남쪽 점, 남동쪽 점 중 가장 Ax^2 + By^2 - AB의 값이 0에 가까운 점을 찾는다.
* 이 과정에서 식의 값을 직접 계산하지 않고 dx, d2x(dy, d2y)를 구해보면 d2x(d2y)가 정수인 상수인 점을 이용해 정수 연산만으로 세 점 중 하나를 택하는 것이 가능하다.
* 위에서 그린 타원은 첫 번째 사분면에만 적용 가능하고, 나머지 사분면의 경우 대칭이동을 통해 쉽게 그릴 수 있다.
* 다항식의 그래프 역시 위와 같은 방법을 사용할 수 있다.

## 재귀적 분할

### 나선

* 나선을 그릴 때 원점에서 멀어질수록 점 사이의 간격이 넓어져 상대적으로 덜 부드러운 그래프가 나온다.
* 거리 공식을 사용해 점 사이의 간격이 특정 값 이상인 경우 재귀적 분할을 통해 원점에서 먼 곳에서도 부드러운 그래프가 나오도록 한다.

## 계산을 회피하는 그 밖의 수학적 기법들

### 멱급수 근삿값 계산

* 삼각함수를 계산할 때 테일러 급수를 활용하면 곱셈만으로 쉽게 값을 계산할 수 있다.
* 90도보다 작은 각도에서만 값을 구해도 충분하다. 90도보다 큰 각도의 경우 대칭이동을 활용하면 되기 때문이다.

### CORDIC 알고리즘

* 좌표 회전 디지털 컴퓨터 알고리즘으로, 어떤 각도에 대한 좌표값을 알고 싶은 경우 사용한다.
* 코사인 값과 사인 값을 직접 계산하지 않고 탄젠트 값이 1, 1/2, 1/4일 때 각도를 표로 만들고 이 각도를 적절히 더하거나 빼는 것을 원하는 각도가 될 때까지 반복한다.