# 라이브러리를 익히고 사용하라

* 0~n 사이의 무작위 정수 하나를 생성할 때, 아래와 같이 코드를 작성하면 여러 문제가 발생한다.
  * n이 그리 크지 않은 2의 제곱수라면 같은 수열이 반복된다.
  * n이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환된다.
  * 종종 지정한 범위 바깥의 수가 튀어나올 수 있다. 만약 nextInt()가 Integer.MIN_VALUE를 반환하면 Math.abs도 Integer.MIN_VALUE를 반환하고, 나머지 연산자는 음수를 반환한다.

```
static Random rnd = new Random();

static int random(int n) {
    return Math.abs(rnd.nextInt()) % n;
}
```

* 위 문제는 Random의 nextInt(int)가 이미 해결했다.
  * 즉, 
  
* 자바 7부터는 Random보다는 ThreadLocalRandom을 사용하면 더 고품질의 무작위 수를 생성하고, 속도도 더 빠르다.
  * 포크-조인 풀이나 병렬 스트림에서는 SplittableRandom을 사용한다.

* 표준 라이브러리를 사용함으로써 얻을 수 있는 이점
  * 그 코드를 작성한 전문가의 지식과 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.
  * 핵심적인 일과 크게 관련 없는 문제를 해결하느라 시간을 허비하지 않아도 된다.
  * 따로 노력하지 않아도 성능이 지속해서 개선된다.
  * 기능이 점점 많아진다.
  * 자신이 작성한 코드가 많은 사람에게 낯익은 코드가 된다.
  
* 자바 프로그래머라면 적어도 java.lang, java.util, java.io와 그 하위 패키지들에는 익숙해져야 한다.
  * 컬렉션 프레임워크와 스트림 라이브러리, java.util.concurrent의 동시성 기능은 알아두면 좋다.

* 때때로 라이브러리가 필요한 기능을 충분히 제공하지 못할 수 있다.
  * 자바 표준 라이브러리에서 원하는 기능을 찾지 못하는 경우 고품질의 서드파티 라이브러리를 찾아본다.
  * 적합한 서드파티 라이브러리도 찾지 못했다면, 직접 구현할 수밖에 없다.  