# 필요 없는 검사 예외 사용은 피하라

* 검사 예외는 제대로 활용하면 API와 프로그램의 질을 높일 수 있다.
  * 발생한 문제를 프로그래머가 처리하여 안전성을 높이게끔 해준다.
  * 물론, 검사 예외를 과하게 사용하면 호출하는 코드에서는 catch 블록을 두거나 더 바깥으로 문제를 전파해야 하기에 오히려 쓰기 불편한 API가 될 수 있다.
  
* API를 제대로 사용해도 발생할 수 있는 예외이거나 프로그래머가 의미 있는 조치를 취할 수 있는 경우 검사 예외를 사용하는 게 좋지만, 그렇지 않다면 비검사 예외를 사용하는 게 좋다.

* 검사 예외를 회피하는 가장 쉬운 방법은 적절한 결과 타입을 담은 옵셔널을 반환하는 것이다.
  * 검사 예외를 던지는 대신 단순히 빈 옵셔널을 반환하면 된다.
  * 단, 예외가 발생한 이유를 알려주는 부가 정보를 담을 수 없다.
  
* 검사 예외을 던지는 메서드를 2개로 쪼개 비검사 예외로 바꿀 수 있다.

> 검사 예외를 던지는 메서드
```
try {
    obj.action(args);
} catch (TheCheckedException e) {
    ... // 예외 상황에 대처
}
```

> 상태 검사 메서드와 비검사 예외를 던지는 메서드
```
if (obj.actionPermitted(args)) {
    obj.action(args);
} else {
    ... // 예외 상황에 대처
}
```

* 위 리팩토링을 모든 상황에 적용할 수는 없지만 적용할 수만 있다면 더 쓰기 편한 API를 제공할 수 있다.

* 프로그래머가 이 메서드가 성공하리란 걸 안다거나, 실패 시 스레드를 중단하길 원한다면 다음처럼 한 줄로 작성해도 무방하다.

```
obj.action(args);
```

* 단, actionPermitted는 상태 검사 메서드임에 주의해야 한다.
  * 외부 동기화 없이 여러 스레드가 동시에 접근할 수 있거나 외부 요인에 의해 상태가 변할 수 있다면 이 리팩토링은 적절하지 않다.
  * actionPermitted가 action 메서드의 작업 일부를 중복 수행한다면 성능 면에서 손해가 있다.