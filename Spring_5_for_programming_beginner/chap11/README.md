# Chapter 11 : MVC 1 : 요청 매핑, 커맨드 객체, 리다이렉트, 폼 태그, 모델

## 요청 매핑 애노테이션을 이용한 경로 매핑

* 웹 어플리케이션 개발은 다음 코드를 작성하는 것이다.
  * 특정 요청 URL을 처리할 코드
  * 처리 결과를 HTML과 같은 형식으로 응답하는 코드
  
* 첫 번째는 @Controller 애노테이션을 사용한 컨트롤러 클래스를 이용해서 구현한다.
  * 컨트롤러 클래스는 요청 매핑 애노테이션을 사용해서 메서드가 처리할 요청 경로를 지정한다.
  * 요청 매핑 애노테이션에는 @RequestMapping, @GetMapping, @PostMapping 등이 있다.
  
* 요청 매핑 애노테이션을 적용한 메서드를 두 개 이상 정의할 수도 있다.
  * 이때 한 컨트롤러 클래스 내 모든 요청 매핑 애노테이션의 경로가 동일한 경로로 시작하는 경우 공통되는 부분의 경로를 담은 @RequestMapping 애노테이션을 클래스에 적용하고 각 메서드는 나머지 경로를 값으로 갖는 요청 매핑 애노테이션을 적용할 수 있다.
  * 이렇게 하면 스프링 MVC는 클래스에 적용한 요청 매핑 애노테이션의 경로와 메서드에 적용한 요청 매핑 애노테이션의 경로를 합쳐서 경로를 찾는다.
  
## GET과 POST 구분: @GetMapping, @PostMapping

* 스프링 MVC는 별도 설정이 없으면 GET과 POST 방식에 상관없이 @RequestMapping에 지정한 경로와 일치하는 요청을 처리한다.
  * GET(POST) 방식 요청만 처리하고 싶다면 @GetMapping(@PostMapping) 애노테이션을 사용해서 제한할 수 있다.
  * 두 애노테이션을 사용하면 같은 경로에 대해 GET과 POST 방식을 각각 다른 메서드가 처리하도록 설정할 수 있다.
  
* @GetMapping, @PostMapping은 스프링 4.3 버전에 추가된 것으로, 이전 버전까지는 @RequestMapping 애노테이션의 method 속성을 사용해서 HTTP 방식을 제한했다.

## 요청 파라미터 접근

* 컨트롤러 메서드에서 요청 파라미터를 사용하는 방법
  * HttpServletRequest를 직접 이용 : HttpServletRequest의 getParameter() 메서드를 이용해서 파라미터 값을 구한다.
  * @RequestParam 애노테이션을 사용 : 요청 파라미터 개수가 몇 개 안 되는 경우 각 요청 파라미터마다 이 애노테이션을 사용해서 값을 구한다.
    * @RequestParam(value="요청_파라미터의_이름", required="필수_여부", defaultValue="요청_파라미터의_값이_없는_경우_Default_값") Type parameter
    * 스프링 MVC는 파라미터 타입에 맞게 String 값을 변환해준다.
    
## 리다이렉트 처리

* 컨트롤러에서 특정 페이지로 리다이렉트시키기 위해서는 "redirect:경로"를 뷰 이름으로 반환하면 된다.
  * "redirect:" 뒤의 문자열이 "/"로 시작하면 웹 어플리케이션을 기준으로 이동 경로를 생성한다.
  * "/"로 시작하지 않으면 현재 경로를 기준으로 상대 경로를 사용한다.
  
## 커맨드 객체를 이용해서 요청 파라미터 사용하기

* 스프링은 요청 파라미터의 개수가 많아지는 경우를 위해 요청 파라미터의 값을 커맨드 객체에 담아주는 기능을 제공한다.
  * 예를 들어 이름이 name인 요청 파라미터의 값을 커맨드 객체의 setName() 메서드를 사용해서 커맨드 객체에 전달하는 기능을 제공한다.
  * 요청 파라미터의 값을 전달받을 수 있는 setter 메서드를 포함하는 객체를 커맨드 객체로 사용하면 된다.
  * 커맨드 객체는 요청 매핑 애노테이션이 적용된 메서드의 파라미터에 위치한다.
  * 스프링 MVC는 메서드에 전달할 객체를 생성하고 그 객체의 setter 메서드를 이용해서 일치하는 요청 파라미터의 값을 전달한다.
  
## 뷰 JSP 코드에서 커맨드 객체 사용하기

* 스프링 MVC는 커맨드 객체의 (첫 글자를 소문자로 바꾼) 클래스 이름과 동일한 속성 이름을 사용해서 커맨드 객체를 뷰에 전달한다.
  * 커맨드 객체의 클래스 이름이 RegisterRequest인 경우 JSP 코드는 registerRequest라는 이름을 사용해서 커맨드 객체에 접근할 수 있다.
  
## @ModelAttribute 애노테이션으로 커맨드 객체 속성 이름 변경

* 커맨드 객체에 접근할 때 사용할 속성 이름을 변경하고 싶다면 커맨드 객체로 사용할 파라미터에 @ModelAttribute 애노테이션을 적용하면 된다.
  * @ModelAttribute 애노테이션은 모델에서 사용할 속성 이름을 값으로 설정한다. 이 값으로 뷰 코드에서 커맨드 객체에 접근할 수 있다.
  
## 커맨드 객체와 스프링 폼 연동

* 기본적으로 비어 있는 폼에 이전에 입력했던 값을 다시 보여주고자 할 때 커맨드 객체의 값을 폼에 채워주면 된다.

* 스프링 MVC가 제공하는 커스텀 태그를 사용하면 좀 더 간단하게 커맨드 객체의 값을 출력할 수 있다.
  * <form:form> 태그와 <form:input> 태그를 제공해 이 두 태그를 사용하면 커맨드 객체의 값을 폼에 출력할 수 있다.
  
* \<form:form\> 태그의 속성
  * action : \<form\> 태그의 action 속성과 동일한 값 사용
  * modelAttribute : 커맨드 객체의 속성 이름을 지정한다. 설정하지 않으면 "command"를 기본값으로 사용한다.

* \<form:input\> : \<input\> 태그 생성
  * path로 지정한 커맨드 객체의 프로퍼티를 \<input\> 태그의 value 속성값으로 사용한다.
  
* 단, \<form:form\> 태그를 사용하려면 커맨드 객체가 반드시 존재해야 한다.
  * 따라서 특별히 커맨드 객체가 필요없는 경우에도 커맨드 객체를 강제로 추가해야 한다.

## 컨트롤러 구현 없는 경로 매핑

* 단순히 요청 경로와 뷰 이름을 연결해주기 위해 컨트롤러 클래스를 만드는 것은 성가신 일이기에, 